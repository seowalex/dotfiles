- defaults:
    link:
        create: true
        relink: true

- clean:
    ~/:
    ~/.config:
        recursive: true

- shell:
    - sudo apt update && sudo apt install -y fish git tmux vim
    - chsh -s $(which fish)
    - curl -fsSL https://starship.rs/install.sh | bash -s -- -y
    - git submodule update --init --remote --recursive
    - fzf/install --no-key-bindings --no-completion --no-update-rc --no-bash --no-zsh

- link:
    ~/.config/fish/conf.d/config-macos-10.15.fish:
        if: string match -q -e '10.15' (sw_vers -productVersion)
        path: macos/10.15/config.fish
    ~/.config/fish/conf.d/config-ubuntu-18.04.fish:
        if: set -q WSL_DISTRO_NAME; and string match -q -e 'Ubuntu 18.04' (lsb_release -ds)
        path: ubuntu/18.04/config.fish
    ~/.config/fish/conf.d/config-ubuntu-20.04.fish:
        if: set -q WSL_DISTRO_NAME; and string match -q -e 'Ubuntu 20.04' (lsb_release -ds)
        path: ubuntu/20.04/config.fish
    ~/.config/fish/config.fish:
    ~/.config/fish/fish_plugins:
    ~/.config/starship.toml:
    ~/.condarc:
    ~/.gitconfig:
    ~/.tmux.conf: .tmux/.tmux.conf
    ~/.tmux.conf.local:
    ~/.vimrc:

- shell:
    - curl -sL https://git.io/fisher | source && fisher update
